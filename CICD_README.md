# GitLab CI/CD é…ç½®è¯´æ˜ ğŸš€

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½®å®Œæ•´çš„ GitLab CI/CD æµç¨‹ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `.gitlab-ci.yml` | CI/CD ä¸»é…ç½®æ–‡ä»¶ï¼ˆ**æ ¸å¿ƒæ–‡ä»¶**ï¼‰ |
| `Dockerfile.ci` | CI ç¯å¢ƒçš„ Docker é•œåƒå®šä¹‰ |
| `scripts/test_ci_locally.sh` | æœ¬åœ°æµ‹è¯•è„šæœ¬ |

## ğŸ“– æ–‡æ¡£

| æ–‡æ¡£ | é€‚åˆäººç¾¤ | å†…å®¹ |
|------|---------|------|
| `CI_CD_QUICKSTART.md` | ğŸŸ¢ æ–°æ‰‹ | å¿«é€Ÿå¼€å§‹æŒ‡å—ã€å¸¸è§é—®é¢˜ |
| `CI_CD_SETUP_SUMMARY.md` | ğŸŸ¡ æ‰€æœ‰äºº | é…ç½®æ€»ç»“ã€åŠŸèƒ½æ¸…å• |
| `.gitlab-ci-docs.md` | ğŸ”´ é«˜çº§ç”¨æˆ· | è¯¦ç»†æŠ€æœ¯æ–‡æ¡£ã€è‡ªå®šä¹‰é…ç½® |

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. æ¨é€ä»£ç è§¦å‘ CI

```bash
git add .
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
git push origin your-branch
```

æ¨é€åè‡ªåŠ¨è§¦å‘ Pipelineï¼Œåœ¨ GitLab æŸ¥çœ‹ï¼š
- è¿›å…¥é¡¹ç›® â†’ CI/CD â†’ Pipelines

### 2. æœ¬åœ°æµ‹è¯•ï¼ˆæ¨èï¼‰

åœ¨æ¨é€å‰æœ¬åœ°éªŒè¯ï¼š

```bash
# å®Œæ•´æµ‹è¯•
./scripts/test_ci_locally.sh

# ä½¿ç”¨ Dockerï¼ˆæœ€æ¥è¿‘ CI ç¯å¢ƒï¼‰
./scripts/test_ci_locally.sh --docker

# å¿«é€Ÿç¼–è¯‘æ£€æŸ¥
./scripts/test_ci_locally.sh --skip-test
```

## ğŸ¯ Pipeline é˜¶æ®µ

1. **Build** ğŸ”¨
   - ç¼–è¯‘ Release å’Œ Debug ç‰ˆæœ¬
   - ç”Ÿæˆæ„å»ºäº§ç‰©

2. **Test** âœ…
   - è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆGoogle Testï¼‰
   - ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆcppcheckï¼‰
   - å†…å­˜æ³„æ¼æ£€æµ‹ï¼ˆvalgrindï¼‰

3. **Deploy** ğŸ“¦
   - ç”Ÿæˆå¹¶å‘å¸ƒæ–‡æ¡£ï¼ˆä»… main åˆ†æ”¯ï¼‰

## ğŸ“Š é¢„æœŸç»“æœ

### âœ… æˆåŠŸçš„ Pipeline

- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ²¡æœ‰ç¼–è¯‘è­¦å‘Š
- ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
- å¯ä»¥å®‰å…¨åˆå¹¶ä»£ç 

### âŒ å¤±è´¥çš„ Pipeline

1. æŸ¥çœ‹å¤±è´¥çš„ Job æ—¥å¿—
2. æœ¬åœ°å¤ç°é—®é¢˜ï¼š`./scripts/test_ci_locally.sh`
3. ä¿®å¤åé‡æ–°æ¨é€

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä½¿ç”¨é¢„æ„å»º Docker é•œåƒï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**: èŠ‚çœ 5-10 åˆ†é’Ÿçš„ä¾èµ–å®‰è£…æ—¶é—´

```bash
# 1. æ„å»ºé•œåƒ
docker build -f Dockerfile.ci -t dental-ci:latest .

# 2. æ¨é€åˆ° GitLab Container Registry
docker login registry.gitlab.com
docker tag dental-ci:latest registry.gitlab.com/YOUR_GROUP/YOUR_PROJECT/ci:latest
docker push registry.gitlab.com/YOUR_GROUP/YOUR_PROJECT/ci:latest

# 3. æ›´æ–° .gitlab-ci.yml
# å°†ç¬¬19è¡Œçš„ image æ”¹ä¸ºä½ çš„é•œåƒåœ°å€
```

### ä¿®æ”¹è§¦å‘æ¡ä»¶

ç¼–è¾‘ `.gitlab-ci.yml`ï¼Œä¿®æ”¹å„ Job çš„ `only` è§„åˆ™ã€‚

è¯¦è§ `.gitlab-ci-docs.md`ã€‚

## ğŸ› å¸¸è§é—®é¢˜

### Q: Pipeline ä¸€ç›´ pendingï¼Ÿ
**A**: GitLab Runner æœªé…ç½®ï¼Œè”ç³»ç®¡ç†å‘˜ã€‚

### Q: æ‰¾ä¸åˆ°ä¾èµ–ï¼Ÿ
**A**: ä½¿ç”¨é¢„æ„å»º Docker é•œåƒï¼Œæˆ–æ£€æŸ¥ `before_script`ã€‚

### Q: æµ‹è¯•å¤±è´¥ï¼Ÿ
**A**: æœ¬åœ°è¿è¡Œ `./build.sh` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ã€‚

### Q: Pipeline å¤ªæ…¢ï¼Ÿ
**A**: ä½¿ç”¨é¢„æ„å»º Docker é•œåƒå¯æé€Ÿ 50-60%ã€‚

## ğŸ“š æ›´å¤šä¿¡æ¯

- **å¿«é€Ÿå¼€å§‹**: é˜…è¯» `CI_CD_QUICKSTART.md`
- **é…ç½®æ€»ç»“**: é˜…è¯» `CI_CD_SETUP_SUMMARY.md`
- **è¯¦ç»†æ–‡æ¡£**: é˜…è¯» `.gitlab-ci-docs.md`
- **GitLab å®˜æ–¹æ–‡æ¡£**: https://docs.gitlab.com/ee/ci/

## âœ¨ æœ€ä½³å®è·µ

1. âœ… æ¨é€å‰å…ˆæœ¬åœ°æµ‹è¯•
2. âœ… å°æ­¥æäº¤ï¼Œé¢‘ç¹æ¨é€
3. âœ… å…³æ³¨ Pipeline çŠ¶æ€
4. âœ… åŠæ—¶ä¿®å¤å¤±è´¥çš„æµ‹è¯•
5. âœ… ä½¿ç”¨é¢„æ„å»ºé•œåƒåŠ é€Ÿ

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹æ–‡æ¡£ï¼š`CI_CD_QUICKSTART.md`
- æäº¤ Issueï¼š[é¡¹ç›® Issue é¡µé¢]
- è”ç³»å›¢é˜Ÿï¼š[å¾…è¡¥å……]

---

**é…ç½®çŠ¶æ€**: âœ… å·²å®Œæˆ  
**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-11-03

ğŸ‰ **ç°åœ¨ä½ å¯ä»¥æ¨é€ä»£ç ï¼Œè®© CI/CD è‡ªåŠ¨å·¥ä½œï¼**
